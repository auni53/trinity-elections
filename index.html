<!doctype HTML5>

<html>
  <head>

    <title>Trinity Elections 2016</title>
    <meta name='viewport' content='width=device-width, initial-scale=1' charset='utf-8' />

    <!--link rel='stylesheet' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css'-->
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <link rel='stylesheet' type='text/css' href='stylesheet.css'>

    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js'></script>
    <script src='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js'></script>

  </head>
  <body>

    <div class='container'>
      <h1>Trinity Elections 2016</h1>
      <h2>Week 2 Results</h2>
      <hr/>

      <div class='dump'>
      </div>
    </div>

    <script>
      $( document ).ready(function() {
        $.ajax({
          // url : 'https://raw.githubusercontent.com/auni53/trinity-elections/gh-pages/data.json',
          url : 'data.json',
          dataType : 'json',
          success : function(result) {
            $( '.dump' ).append(create(result));
          },
          error : function() { console.log('ERROR'); debugger; }
        });
      });

      function create(data) {

        debugger;
        text = '';
        for (let position in data) {

          // Create header and table
          text += '<h3>' + position + '</h3>';
          text += '<table class="pure-table pure-table-horizontal"><thead><tr><th>Round</th>';

          let table = data[position];
          let length = table['Reopen Nominations'].length;

          // Create table header
          for (let name in table) {
            text += '<th>' + name + '</th>'
          } text += '</tr></thead><tbody>';

          // Generate tabel rows
          let c = 0;
          while (c < length) {
            text += '<td><b>' + (c + 1) + '</b></td>';
            for (let name in table) {
              text += '<td>' + table[name][c] + '</td>'
            } text += '</tr>';
            c++;
          };
          text += '</tbody></table><hr/>';

        }
        return text;

    }

    </script>
  </body>
</html>
